<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="description"
      content="Acompanhe epis√≥dios de s√©ries e animes, avalie filmes e s√©ries, e organize suas notas para n√£o perder o que j√° assistiu."
    />
    <meta
      name="keywords"
      content="filmes, s√©ries, animes, marcar, epis√≥dios, novos epis√≥dios, lista, myanimelist"
    />
    <meta name="author" content="Arthur Beraldo" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/crud.css" />
    <link
      rel="shortcut icon"
      href="img-gerais/favicon.ico"
      type="image/x-icon"
    />
    <title>WatchPoint - CRUD</title>
  </head>

  <body>
    <header id="navegador">
      <div id="nav-esquerda">
        <div id="logo">
          <img src="img-gerais/logo_watchpoint.png" alt="Logo WatchPoint" />
        </div>
        <div id="menu-wrapper">
          <input type="checkbox" id="menu-drop" class="menu-drop" />
          <label for="menu-drop" class="menu-texto">&#9776; Menu</label>
          <nav class="menu">
            <a href="index.html">Home</a>
            <a href="pag-gerais/animes.html">Animes</a>
            <a href="pag-gerais/series.html">S√©ries</a>
            <a href="pag-gerais/filmes.html">Filmes</a>
            <a href="historia.html">Hist√≥ria</a>
          </nav>
        </div>
        <div class="separador"></div>
      </div>

      <div id="nav-centro">
        <form class="pesquisa">
          <label for="pesquisa-inline" style="display: none">Pesquisar</label>
          <input
            type="text"
            id="pesquisa-inline"
            placeholder="üîçÔ∏é Buscar t√≠tulo..."
          />
        </form>
      </div>

      <div id="nav-direita">
        <nav class="separador"></nav>
        <nav class="nav">
          <a href="crud.html">Crud</a>
          <a href="biblioteca.html">Biblioteca</a>
          <a href="login.html">Login</a>
        </nav>
        <nav
          class="separador"
          style="margin-left: -50px; background-color: transparent"
        ></nav>
      </div>
    </header>

    <h1 id="titulo_principal">CRUD</h1>

    <main>
      <div id="janela-add">
        <form class="form" id="form-cadastro">
          <label for="nome">Nome do Filme/S√©rie/Anime:</label>
          <input
            type="text"
            id="nome"
            name="nome"
            placeholder="Digite o nome"
            required
          />

          <label for="tipo">Tipo:</label>
          <select id="tipo" name="tipo" required>
            <option value="" disabled selected hidden>Escolha uma Tipo</option>
            <option value="Anime">Anime</option>
            <option value="Filme">Filme</option>
            <option value="S√©rie">S√©rie</option>
          </select>

          <label for="poster">URL do P√¥ster:</label>
          <input
            type="url"
            id="poster"
            name="poster"
            placeholder="https://..."
            required
          />

          <label for="sinopse">Sinopse:</label>
          <textarea
            id="sinopse"
            name="sinopse"
            rows="3"
            placeholder="Descreva brevemente o conte√∫do"
            required
          ></textarea>

          <div id="container-episodios" class="escondido">
            <label for="episodios">Quantidade de Epis√≥dios:</label>
            <input
              type="number"
              id="episodios"
              name="episodios"
              placeholder="Ex: 24"
            />
          </div>

          <label for="nota">Nota Geral (0 a 10):</label>
          <input
            type="number"
            id="nota"
            name="nota"
            placeholder="Ex: 8.4"
            step="0.1"
          />

          <label for="generos">G√™neros (separe por v√≠rgula):</label>
          <input
            type="text"
            id="generos"
            name="generos"
            placeholder="Ex: A√ß√£o, Aventura, Fantasia"
          />

          <button id="btn-cadastrar" type="submit">Salvar</button>
        </form>
      </div>

      <table>
        <thead>
          <tr>
            <th scope="col">Nome</th>
            <th scope="col">Tipo</th>
            <th scope="col">P√¥ster</th>
            <th scope="col">Sinopse</th>
            <th scope="col">Epis√≥dios</th>
            <th scope="col">Nota</th>
            <th scope="col">G√™neros</th>
            <th scope="col">A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="obrasTabela"></tbody>
      </table>

      <div id="editModal" class="modal">
        <div class="modal-content">
          <a href="#" class="close">&times;</a>
          <form class="form form-modal" id="form-edicao">
            <div class="coluna">
              <label for="edit-nome">Nome do Filme/S√©rie/Anime:</label>
              <input type="text" id="edit-nome" name="nome" required />

              <label for="edit-tipo">Tipo:</label>
              <select id="edit-tipo" name="tipo" required>
                <option value="Anime">Anime</option>
                <option value="Filme">Filme</option>
                <option value="S√©rie">S√©rie</option>
              </select>

              <label for="edit-poster">URL do P√¥ster:</label>
              <input type="url" id="edit-poster" name="poster" required />

              <label for="edit-sinopse">Sinopse:</label>
              <textarea
                id="edit-sinopse"
                name="sinopse"
                rows="4"
                required
              ></textarea>
            </div>

            <div class="coluna">
              <div id="container-episodios-edicao">
                <label for="edit-episodios">Quantidade de Epis√≥dios:</label>
                <input
                  type="number"
                  id="edit-episodios"
                  name="episodios"
                  min="1"
                />
              </div>

              <label for="edit-nota">Nota Geral (0 a 10):</label>
              <input
                type="number"
                id="edit-nota"
                name="nota"
                min="0"
                max="10"
                step="0.1"
              />

              <label for="edit-generos">G√™neros (separe por v√≠rgula):</label>
              <input type="text" id="edit-generos" name="generos" />
            </div>

            <button type="submit" class="btn-submit">Salvar Altera√ß√µes</button>
          </form>
        </div>
      </div>
    </main>

    <footer>
      <p>&copy; 2025 WatchPoint. Todos os direitos reservados.</p>
      <div class="social">
        <a href="https://www.instagram.com/_anfitras/" target="_blank"
          >Instagram</a
        >
        | <a href="https://github.com/Anfitras" target="_blank">GitHub</a> |
        <a href="mailto:arthur.beraldo@alunos.ifsuldeminas.edu.br">Contato</a>
      </div>
    </footer>
    <script src="js/crud.js"></script>
    <script>
      function atualizarCampoDinamico() {
        const tipoSelect = document.getElementById("tipo");
        const containerEpisodios = document.getElementById(
          "container-episodios"
        );
        const labelDinamica = document.querySelector('label[for="episodios"]');
        const inputDinamico = document.getElementById("episodios");

        // Se algum dos elementos n√£o existir, aborta silenciosamente
        if (
          !tipoSelect ||
          !labelDinamica ||
          !inputDinamico ||
          !containerEpisodios
        )
          return;

        // Mostra o container apenas se houver um tipo selecionado
        if (tipoSelect.value) {
          containerEpisodios.classList.remove("escondido");
        } else {
          containerEpisodios.classList.add("escondido");
        }

        if (tipoSelect.value === "Filme") {
          labelDinamica.textContent = "Dura√ß√£o do Filme:";
          // Para permitir formatos como "2h 15m" usamos type text
          inputDinamico.type = "text";
          inputDinamico.placeholder = "Ex: 2h 15m";
        } else {
          labelDinamica.textContent = "Quantidade de Epis√≥dios:";
          inputDinamico.type = "number";
          inputDinamico.placeholder = "Ex: 24";
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        atualizarCampoDinamico();
        const tipoSelect = document.getElementById("tipo");
        if (tipoSelect) {
          tipoSelect.addEventListener("change", atualizarCampoDinamico);
        }
      });
    </script>
  </body>
</html>
